{"version":3,"sources":["stepper.js"],"names":["$","fn","stepper","options","timeout","debounce","func","wait","immediate","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","findDecimals","num","split","length","getValue","val","bindEvents","spinner","closest","_this","find","on","click","type","attr","increase","call","decrease","mousedown","data","setInterval","settings","mouseup","document","clearInterval","current","parseFloat","decimals","step","newValue","toFixed","updateValue","max","min","focus","triggerChange","trigger","each","extend","is","undefined","parseInt","init","jQuery"],"mappings":"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","file":"stepper.js","sourcesContent":["/*jshint esversion: 6 */\n(function ($) {\n\n    \"use strict\";\n\n\n    $.fn.stepper = function (options) {\n\n        let timeout;\n\n        /**\n         * Debounce\n         *\n         * @returns {Function}\n         * @param func\n         * @param wait\n         * @param immediate\n         *\n         * Source: https://davidwalsh.name/javascript-debounce-function\n         */\n        const debounce = function (func, wait, immediate) {\n            let timeout;\n            return function () {\n                let context = this, args = arguments;\n                let later = function () {\n                    timeout = null;\n                    if (!immediate) func.apply(context, args);\n                };\n                let callNow = immediate && !timeout;\n                clearTimeout(timeout);\n                timeout = setTimeout(later, wait);\n                if (callNow) func.apply(context, args);\n            };\n        };\n\n\n        /**\n         * Find the amount of decimals in a number\n         *\n         * @param num\n         * @returns {Number}\n         *\n         * Source: http://stackoverflow.com/a/10454534\n         */\n        const findDecimals = function(num) {\n            return (num.split('.')[1] || []).length;\n        };\n\n        /**\n         * Get current value\n         *\n         * @returns {number}\n         */\n        const getValue = function () {\n            return $(this).val() === '' ? 0 : $(this).val();\n        };\n\n        /**\n         * bindEvents\n         */\n        const bindEvents = function () {\n            const spinner = $(this).closest('.js-spinner');\n            var _this = this;\n\n            spinner.find('[spinner-button]').on({\n                click: function() {\n                    const type = $(this).attr('spinner-button');\n                    if (type === 'up'){\n                        $.fn.stepper.increase.call(_this);\n                    }else{\n                        $.fn.stepper.decrease.call(_this);\n                    }\n                },\n                mousedown: function(){\n                    $(this).data('timer', setTimeout(() => {\n                        timeout = setInterval(() => {\n                            const type = $(this).attr('spinner-button');\n                            if (type === 'up'){\n                                $.fn.stepper.increase.call(_this);\n                            }else{\n                                $.fn.stepper.decrease.call(_this);\n                            }\n                        }, 60);\n                    }, _this.settings.debounce));\n                },\n                mouseup: function() {\n                    clearTimeout($(this).data('timer'));\n                }\n            });\n\n            $(document).mouseup(function () {\n                clearInterval(timeout);\n            });\n        };\n\n        /**\n         * Increase\n         */\n        $.fn.stepper.increase = function () {\n            let current = parseFloat(getValue.call(this));\n            this.settings = $(this).data('settings');\n            const decimals = findDecimals(this.settings.step);\n            const newValue = (current + parseFloat(this.settings.step)).toFixed(decimals);\n            updateValue.call(this, newValue);\n        };\n\n        /**\n         * Decrease\n         */\n        $.fn.stepper.decrease = function () {\n            let current = parseFloat(getValue.call(this));\n            this.settings = $(this).data('settings');\n            const decimals = findDecimals(this.settings.step);\n            const newValue = (current - parseFloat(this.settings.step)).toFixed(decimals);\n            updateValue.call(this, newValue);\n        };\n\n        /**\n         * Update stepper element\n         * @param newValue\n         */\n        const updateValue = function (newValue) {\n            if ((newValue <= this.settings.max || typeof this.settings.max === \"undefined\") && (newValue >= this.settings.min || typeof this.settings.min === \"undefined\")) {\n                $(this).val(newValue).focus();\n                triggerChange.call(this);\n            }\n        };\n\n        /**\n         * Trigger change event on number field for third party hooks\n         *\n         * @type {Function}\n         */\n        const triggerChange = debounce(function () {\n            $(this).trigger('change');\n        }, 400);\n\n        /**\n         * Loop every instance\n         */\n        return this.each(function () {\n\n            /**\n             * Default settings merged with user settings\n             * Can be set trough data attributes or as parameter.\n             * @type {*}\n             */\n            this.settings = $.extend({\n                step: $(this).is('[step]') ? $(this).attr('step') : 1,\n                min: $(this).is('[min]') ? parseFloat($(this).attr('min')) : undefined,\n                max: $(this).is('[max]') ? parseFloat($(this).attr('max')) : undefined,\n                debounce: $(this).is('[data-stepper-debounce]') ? parseInt($(this).attr('data-stepper-debounce')) : 400,\n            }, options);\n\n\n            this.init = () => {\n                // Store settings\n                $(this).data('settings', this.settings);\n\n                // Bind events\n                bindEvents.call(this);\n            };\n\n            // Init\n            this.init();\n\n        });\n    };\n\n    /**\n     * Auto load\n     */\n    $('input[type=\"number\"]').stepper();\n\n}(jQuery));"]}